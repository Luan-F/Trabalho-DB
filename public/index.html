<html>
	<head>
		<title>PÃ¡gina inicial</title>

		<style>
			table {
				align-items: center;
				border-collapse: collapse;
			}

			td, th {
				border: 2px solid #000;
				text-align: center;
				padding: 9px;
			}

			#searchTable {
				display: none;
			}

			div.container {
				display: flex;
				align-itens: center;
				justify-content: space-around;
			}
		</style>
		<script src="/socket.io/socket.io.js"></script>
	</head>
	<body>
		<div>
			<div class="container">
				<a href="/detalhes.html">Tela de detalhes</a>
			</div>
			<div class="container">
				<table id="searchTable"></table>
			</div>
	
		<div>

		<script type="module">
			import createTable from './table.js';

			const socket = io();

			socket.on('findAll', (rows) => {
				let t = document.getElementById('searchTable');
				t.style.display =  'inline';
				t.innerHTML = createTable(
					[
					 	['prod_id', 'Id'], 
					 	['prod_name', 'Nome'],
					 	['prod_cat', 'Categoria']
					], 			
					rows
				);
			});

			socket.on('searchFound', (rows) =>{
				alert(`Achei ${rows.length} itens!`);
				console.log(rows);
				createTable(rows);
			});

			socket.on('searchError', (err) => {
				alert('Erro!');
				console.log(err);
			});

			socket.on('addRes', () => {
				alert('Item adicionado com sucesso!');
			});

			socket.on('addError', (err) => {
				alert('Error: ', err);
				console.log(err);
			});

			socket.on('rmRes', () => {
				alert('Item removido com sucesso!');
			});

			socket.on('rmError', (err) => {
				alert('Erro na hora de remover o item!');
				console.log(err);
			});
		</script>
	</body>
</html>
